---
title: \vspace{2.5in}"LAW AS DATA"
always_allow_html: yes
subtitle: "Feldman"
date: ''
output: 
  html_document:
fig_width: 4
fig_height: 3
bibliography: bibliography.bib
---

```{r, echo = FALSE, warning = FALSE, message = FALSE, comment = NA, error= FALSE, cache = FALSE}
# Packages
library(sfi)
library(webshot)
library(ggplot2)
library(dplyr)
library(plotly)
library(ggiraph)
library(scales)
library(tidyverse)
library(knitr)
library(Hmisc)
library(RColorBrewer)
library(extrafont)
library(kableExtra)
library(grid)

# webshot::install_phantomjs()

loadfonts()
## Global options
options(max.print="75")
opts_chunk$set(echo=FALSE,
            cache=FALSE,
              prompt=FALSE,
              tidy=TRUE,
              comment=NA,
              message=FALSE,
              warning=FALSE,
              dpi = 300,
              # dev = "cairo_pdf",
            fig.width = 4,
            fig.height = 3,
              dev = c("png", "cairo_pdf"),
              fig.pos="!h",
              fig.path = 'figures/')
opts_knit$set(width=75)
options(xtable.comment = FALSE)
```


#### This markdown if for Feldman figures.

# Alexander 4
```{r}
# Get data
  data <- all_data$feldman$f1 
  
  # recode federal
  data$federal <- ifelse(data$federal == '1', 'Federal', 'State')


  #Version 1
  g1<- ggplot(data, 
         aes(x = federal, 
             y = clarity_score)) +
    ylim(c(-3, 13)) +
    stat_ydensity(geom="segment", 
                  adjust = 20,
                  scale = 'area',
                  aes(xend=..x..+..scaled../3.5, 
                      yend=..y.., 
                      alpha=(..scaled../3)^5), 
                  size=3, 
                  color = 'darkgrey',
                  trim=TRUE) +
    stat_ydensity(geom="segment", 
                  adjust = 20,
                  scale = 'area',
                  aes(xend=..x..-..scaled../3.5, 
                      yend=..y.., 
                      alpha=(..scaled../3)^5), 
                  size=3, 
                  linetype = 1,
                  color = 'darkgrey',

                  trim=TRUE) +
    labs(x = '',
         y = 'Clarity Score',
         title = 'Figure 1. Federal and State Clarity Score Distribution (Version 1)',
         caption = 'The shading is a function of the point distribution') +
    scale_alpha_continuous(range= c(-0, .5)) +
    geom_jitter(size = 1,
                color = 'black',
                width = 0.3,
                alpha = 0.5,
                pch = 16) +
      theme_sfi(lp = 'none',
                y_axis_title_style = 'bold',
                x_axis_title_style = 'bold',
                title_style = 'bold')  
  # Version 2
  g2 <- ggplot(data %>% filter(clarity_score < 8),
         aes(x = federal,
             y = clarity_score)) +
    ylim(c(-3, 13)) +
    stat_ydensity(geom="segment",
                  adjust = 20,
                  scale = 'area',
                  aes(xend=..x..+..scaled../3,
                      yend=..y..,
                      alpha=..scaled../2),
                  size=3,
                  color = 'darkgrey',
                  trim=FALSE) +
    stat_ydensity(geom="segment",
                  adjust = 20,
                  scale = 'area',
                  aes(xend=..x..-..scaled../3,
                      yend=..y..,
                      alpha=..scaled../2),
                  size=3,
                  linetype = 1,
                  color = 'darkgrey',
                  trim=FALSE) +
    scale_alpha_continuous(range= c(0.00, .999)) +
    labs(x = '',
         y = 'Clarity Score',
         title = 'Figure 1. Federal and State Clarity Score Distribution (Version 2)',
         caption = 'The shading is a function of the point distribution') +
    geom_jitter(size = 1,
                color = 'black',
                width = 0.3,
                alpha = 0.8,
                pch = 16) +
    theme_sfi(lp = 'none',
              y_axis_title_style = 'bold',
              x_axis_title_style = 'bold',
              title_style = 'bold')


```





